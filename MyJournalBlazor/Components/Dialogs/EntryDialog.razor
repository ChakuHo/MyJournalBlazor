@using MudBlazor
@using MyJournalBlazor.Models

<MudDialog>
    <TitleContent>
        <div class="d-flex align-center gap-2">
            <MudIcon Icon="@GetMoodIcon()" Color="@GetMoodColor()" />
            <MudText Typo="Typo.h6">@Entry.Title</MudText>
        </div>
        <MudText Typo="Typo.caption">@Entry.Date.ToLongDateString()</MudText>
    </TitleContent>
    <DialogContent>
        <MudContainer Style="max-height: 400px; overflow-y: scroll;">
            <!--(MarkupString) converts HTML tags to real text -->
            <MudText>@((MarkupString)Entry.Content)</MudText>
        </MudContainer>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Close</MudButton>
    </DialogActions>
</MudDialog>

@code {
    
    [CascadingParameter] IMudDialogInstance MudDialog { get; set; }

    [Parameter] public JournalEntry Entry { get; set; }

    private void Cancel() => MudDialog.Cancel();

    private string GetMoodIcon() => Entry.Mood switch
    {
        "Positive" => Icons.Material.Filled.SentimentVerySatisfied,
        "Negative" => Icons.Material.Filled.SentimentVeryDissatisfied,
        _ => Icons.Material.Filled.SentimentNeutral
    };

    private Color GetMoodColor() => Entry.Mood switch
    {
        "Positive" => Color.Success,
        "Negative" => Color.Error,
        _ => Color.Warning
    };
}